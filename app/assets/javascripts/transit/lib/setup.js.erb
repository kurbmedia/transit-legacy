<% Transit.contexts.map(&:to_s).map(&:classify).each do |context| %>
Transit.<%= context %> = Spine.Model.setup("<%= context %>",
	[<%= context.constantize.new.to_js.collect do |key, value| 
		key = "resource_id" if key == "id"
		"'#{key}'" 
	end.join(",\n\t\t") %>, 'options', 'element_id' ]);
// Alias find to findByAttribute so models can be looked up by mongo id instead of memory id.
Transit.<%= context %>.extend({
	find: function( uid ){
		return Transit.<%= context %>.findByAttribute('resource_id',  uid);
	}
});
<% end %>